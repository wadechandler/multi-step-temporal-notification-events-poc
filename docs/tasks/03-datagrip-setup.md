# Task 03: DataGrip Connection Guide

## Context

The team uses JetBrains DataGrip for database management. After infrastructure is running
(Task 01 or 02), users need to connect DataGrip to the databases for inspection, debugging,
and query development.

Databases are exposed via NodePort services on the KIND cluster:
- **Business DB (CNPG):** localhost:30432, database `business`, user `app`
- **Temporal DB (CNPG):** localhost:30433, database `temporal`, user `temporal`
- **Business DB (YugabyteDB):** localhost:30432, database `business` (YSQL, port 5433 internally)

Passwords are auto-generated by CNPG and stored in K8s secrets. For YugabyteDB, default
credentials or manually set passwords are used.

## Prerequisites
- Task 01 or 02 completed (infrastructure running)

## Key Files
- `infra/scripts/verify.sh` — Prints connection info
- `README.md` — Should be updated with connection instructions

## Deliverables
1. A `docs/guides/datagrip-connection.md` with step-by-step instructions:
   - How to retrieve passwords from K8s secrets for CNPG mode
   - How to retrieve passwords for YugabyteDB mode
   - DataGrip connection configuration (host, port, database, user, password, SSL off)
   - Screenshots-equivalent text descriptions of each DataGrip dialog
   - Verification query: `SELECT version();` and `SELECT * FROM contacts LIMIT 1;`
2. Updated `README.md` with a "Database Access" section linking to the guide

## Acceptance Criteria
- A colleague can follow the guide and connect DataGrip to all 3 databases
- Password retrieval commands are correct and tested
- Guide covers both CNPG and YugabyteDB modes

## Prompt (for Builder sub-agent)

```
Read the following files for context:
- docs/tasks/03-datagrip-setup.md (this task)
- infra/scripts/setup.sh (see NodePort service definitions and DB credentials)
- infra/scripts/verify.sh (see connection info output)
- README.md

Task: Create docs/guides/datagrip-connection.md with step-by-step DataGrip
connection instructions for both CNPG and YugabyteDB modes.

Include:
1. Shell commands to retrieve each database password from K8s secrets
2. DataGrip "New Data Source" configuration for each database
3. Test queries to verify the connection
4. Add a "Database Access" section to README.md linking to this guide

Keep it concise and practical. No fluff.
```
